!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self)["h-h"]={})}(this,(function(e){"use strict";var t=function(){if(void 0!==t)return t;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object")}();function n(){return function(e){return t.queueMicrotask(e)}}"function"!=typeof t.queueMicrotask&&(t.queueMicrotask=function(e){if(!t.Promise)return"undefined"!=typeof process?process.nextTick(e):setTimeout(e);Promise.resolve().then(e).catch((function(e){return setTimeout((function(){throw e}))}))});var r=n(),o=function(e){},i=IncrementalDOM,u=i.attributes,a=i.notifications,c=i.patchOuter,f=i.renderToString,l=i.skip,s=i.skipNode,d=(void 0===u?{}:u)||{},p=i.attr,v=i.elementClose,h=i.elementOpenEnd,m=i.elementOpenStart,g=void 0===a?{nodesCreated:o,nodesDeleted:o}:a,y=void 0===f?o:f,k=i.text,w=void 0===l?o:l,b=void 0===s?o:s,_=function(e,t){return r((function(){return c(e,t)}))};d.value=function(e,t,n){return e.value=null==n?"":n},d.checked=function(e,t,n){return e.checked=!!n},g.nodesDeleted=function(e){return e.forEach((function(e){return e&&e._elementDetached&&r(e._elementDetached)}))},g.nodesCreated=function(e){return e.forEach((function(e){return e&&e._elementAttached&&r(e._elementAttached)}))};var D=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;function E(e){return/^on/.test(e)}function I(e){return/^skip$/.test(e)}function A(e){return/^ref$/.test(e)}function S(e){for(var t=e.attributes,n=e.names,r=e.length,o=0;o<r;o++){var i=n[o];if(i&&!E(i)&&!I(i)&&!A(i)){var u="className"===i?"class":"",a="htmlFor"===i?"for":"",c=D.test(i)&&i.replace(/[A-Z0-9]/,"-$&").toLowerCase();p(a||u||c||i,t[i])}}}function x(e){for(var t=e.attributes,n=e.names,r=e.length,o=e.element,i=0;i<r;i++){var u=n[i];if(u&&E(u)){var a=u.toLowerCase().substring(2);o._listeners=o._listeners||{},o._listeners[a]||o.addEventListener(a,C,!1),o._listeners[a]=t[u]}}}function C(e){return e.currentTarget._listeners[e.type](e)}function O(e,t){if(e.length>2)for(var n=2;n<e.length;n++)t(e[n])}function M(e){var t="string"==typeof e?k(e):"";return"function"==typeof e?e():t}var P,T="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||window,j=B();function L(e){var t=j.set(e,T.location.pathname);return P=function(e){return function(t){t.addEventListener("click",(function n(r){t.removeEventListener("click",n),N({options:e,event:r})})),t.click()}}(e),function(e){T.addEventListener("popstate",(function(t){return N({options:e,event:t})}))}(e),$({match:t,path:q(T.location),isPopState:!1}),{view:t.view||e.view}}function N(e){var t=e.options,n=e.event,r=n.currentTarget,o=j.set(t,T.location.pathname);n.preventDefault(),$({match:o,path:q(r)||q(location),isPopState:"popstate"===n.type}),_(document.getElementById(t.routerId||t.id||"app"),o.view())}function q(e){return e.pathname+(e.search||e.hash)}function $(e){var t,n=e.path,r=e.isPopState,o=(t=e.match).title(t.params)||T.document.title;r||T.history.pushState({},o,n),T.document.title=o}function U(e,t){for(var n,r=/:([^/]+)/,o=[];n=t.match(r);)t=t.replace(r,"([^?/]+)"),o.push(n[1]);var i=new RegExp("^"+t+"(\\?(.*)|$)","i"),u=e.match(i);if(u)return o.reduce((function(e,t,n){return e[t]=u[n+1],e}),{})}function B(){var e=new Map,t=function(){};return{set:function(n,r){if(!e.has(r)){for(var o,i="",u=n.router,a=Object.keys(u),c=a.length,f=0;f<c&&(i=a[f],!(o=U(r,a[f])));f+=1);var l=u[i];e.set(r,{params:o,title:l.title||t,view:l.view||t})}return e.get(r)}}}var F=n(),J=1,R=new Map,Z=new Map,z=new Map,H=function(e){(R.get(e)||[]).forEach((function(e){var t=Z.get(e);t&&(t.__deleted(t),t.__hooks.forEach((function(e){return z.delete(e)}))),R.delete(e),Z.delete(e)}))},W=function(e,t){Z.set(e,t),function(e,t){Z.forEach((function(n,r){var o=Z.get(r);o&&o.contains(e)&&R.set(r,[].concat(R.get(r)||[],[t]))}))}(t,e)};e.app=function(e){var t,n=e.router&&L(e),r=n&&n.view||e.view,o=new DocumentFragment,i=document.createElement("div"),u=document.getElementById(e.id||"app");(null==u?void 0:u.hasAttribute("data-skip"))||(o.appendChild(i),_(o.querySelector("div"),r()),null==u||null===(t=u.parentNode)||void 0===t||t.replaceChild(i,u))},e.attrIDom=p,e.attributesIDom=d,e.component=function(e){function t(t,n){return function(e){var t,n=e.hooks,r=e.newProps,o=e.key,i=e.onCreate,u=e.onDelete,a=e.render,c=function(){},f=new Set,l=c,s=c,d={},p=function(e){var r=0,c=a({created:function(e){return l=e||l},deleted:function(e){return s=e||s},execute:function(e,t){return function(e){return function(t,r){var o=!r,i=n.get(e),u=!i||!r.every((function(e,t){return JSON.stringify(e)===JSON.stringify(i[t])}));(o||u)&&F((function(){n.set(e,r),f.add(e),t()}))}}("execute-"+o+"-"+r++)(e,t)},key:o,props:d=e||{},update:function(e){return function(e){return function(r){var o=e;return n.has(e)||(n.set(e,r),f.add(e)),[n.get(e),function(e){F((function(){n.set(o,e),_(t,p(d))}))}]}}("update-"+o+"-"+r++)(e)}});return null===c?function(){return null}:function(){return t=c({key:o,elementAttached:function(){var e=t;e.__hooks=f,e.__deleted=s,d.view&&(e.dataset.view=d.view),l(t),i(o,t)},elementDetached:function(){u(o,t)}})}};return p(r)}({hooks:z,key:n&&n.key?n.key+t:t,newProps:n||{},onCreate:W,onDelete:H,render:e})}return function(){return t.bind(null,"__"+J+++"__")}},e.elementCloseIDom=v,e.elementOpenEndIDom=h,e.elementOpenStartIDom=m,e.h=function(e,t,n){var r=t||{},o=arguments,i=Object.keys(r),u=i.length;function a(t){var a;void 0===t&&(t={skip:!1});var c=r.elementAttached||t.elementAttached,f=r.elementDetached||t.elementDetached,l=r.skip||t.skip||null;return m(e,r.key||t.key||null),S({attributes:r,names:i,length:u}),h(),l?(w(),a=v(e)):(Array.isArray(n)?n.forEach(M):O(o,M),(a=v(e)||{})._elementAttached=c,a._elementDetached=f,"undefined"!=typeof window&&x({attributes:r,names:i,length:u,element:a}),"function"==typeof r.ref&&r.ref(a)),a}return a},e.notificationsIDom=g,e.patch=_,e.redirect=function(e){var t=T.document.createElement("a");t.setAttribute("href",e),P(t)},e.renderToStringIDom=y,e.router=L,e.skipIDom=w,e.skipNodeIDom=b,e.textIDom=k,e.to=function(e){var t=e.currentTarget;e.preventDefault(),P(t)},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=h-h.umd.production.min.js.map
