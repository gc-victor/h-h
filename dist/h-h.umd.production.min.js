!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self)["h-h"]={})}(this,(function(e){"use strict";function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var n=function(){if(void 0!==n)return n;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object")}();function r(){return function(e){return n.queueMicrotask(e)}}"function"!=typeof n.queueMicrotask&&(n.queueMicrotask=function(e){if(!n.Promise)return"undefined"!=typeof process?process.nextTick(e):setTimeout(e);Promise.resolve().then(e).catch((function(e){return setTimeout((function(){throw e}))}))});var o=r(),i=function(e){},u=IncrementalDOM,a=u.attributes,c=u.notifications,f=u.patchOuter,l=u.renderToString,s=u.skip,d=u.skipNode,p=(void 0===a?{}:a)||{},v=u.attr,m=u.elementClose,h=u.elementOpenEnd,g=u.elementOpenStart,y=void 0===c?{nodesCreated:i,nodesDeleted:i}:c,w=void 0===l?i:l,k=u.text,b=void 0===s?i:s,D=void 0===d?i:d,_=function(e,t){return o((function(){return f(e,t)}))};p.value=function(e,t,n){return e.value=null==n?"":n},p.checked=function(e,t,n){return e.checked=!!n},y.nodesDeleted=function(e){return e.forEach((function(e){return e&&e._elementDetached&&o(e._elementDetached)}))},y.nodesCreated=function(e){return e.forEach((function(e){return e&&e._elementAttached&&o(e._elementAttached)}))};var E=new WeakMap,A=new Map;function I(e){return/^on/.test(e)}function O(e){return/^skip$/.test(e)}function S(e){return/^ref$/.test(e)}function M(e){for(var t=e.attributes,n=e.names,r=e.length,o=0;o<r;o++){var i=n[o];if(i&&!I(i)&&!O(i)&&!S(i)){var u="className"===i?"class":"",a="htmlFor"===i?"for":"",c=i.replace(/[A-Z](?:(?=[^A-Z])|[A-Z]*(?=[A-Z][^A-Z]|$))/g,(function(e,t){return(t>0?"-":"")+e.toLowerCase()}));v(a||u||c,t[i])}}}function C(e){for(var n=e.attributes,r=e.names,o=e.length,i=e.element,u=0;u<o;u++){var a=r[u];if(a&&I(a)){var c,f=a.toLowerCase().substring(2),l=E.get(i)||{};A.has(f)||document.body.addEventListener(f,j,!1),A.set(f,1),E.set(i,t(t({},l),{},((c={})[f]=n[a],c)))}}}function j(e){var t=E.get(e.target)||{},n=e.type;if(t[n])return t[n](e)}function x(e,t){if(e.length>2)for(var n=2;n<e.length;n++)t(e[n])}function P(e){var t="string"==typeof e?k(e):"";return"function"==typeof e?e():t}var L,N="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||window,T=F();function Z(e){var t=N.location.pathname,n=T.set(e,t);return L=function(e){return function(t){t.addEventListener("click",(function n(r){t.removeEventListener("click",n),q({options:e,event:r})})),t.click()}}(e),function(e){N.addEventListener("popstate",(function(t){return q({options:e,event:t})}))}(e),$({match:n,path:t,isPopState:!1}),{view:n.view||e.view}}function q(e){var t=e.options,n=e.event,r=n.currentTarget.pathname||N.location.pathname,o=T.set(t,r);n.preventDefault(),$({match:o,path:r,isPopState:"popstate"===n.type}),_(document.getElementById(t.routerId||t.id||"app"),o.view())}function $(e){var t,n=e.path,r=e.isPopState,o=(t=e.match).title(t.params)||N.document.title;r||N.history.pushState({},o,n),N.document.title=o}function B(e,t){for(var n,r=/:([^/]+)/,o=[];n=t.match(r);)t=t.replace(r,"([^?/]+)"),o.push(n[1]);var i=new RegExp("^"+t+"(\\?(.*)|$)","i"),u=e.match(i);if(u)return o.reduce((function(e,t,n){return e[t]=u[n+1],e}),{})}function F(){var e=new Map,t=function(){};return{set:function(n,r){if(!e.has(r)){for(var o,i="",u=n.router,a=Object.keys(u),c=a.length,f=0;f<c&&(i=a[f],!(o=B(r,a[f])));f+=1);var l=u[i];e.set(r,{params:o,title:l.title||t,view:l.view||t})}return e.get(r)}}}var J=r(),R=1,U=new Map,W=new Map,z=new Map,G=function(e){(U.get(e)||[]).forEach((function(e){var t=W.get(e);t&&(t.__deleted(t),t.__hooks.forEach((function(e){return z.delete(e)}))),U.delete(e),W.delete(e)}))},H=function(e,t){W.set(e,t),function(e,t){W.forEach((function(n,r){var o=W.get(r);o&&o.contains(e)&&U.set(r,[].concat(U.get(r)||[],[t]))}))}(t,e)};e.app=function(e){var t,n=e.router&&Z(e),r=n&&n.view||e.view,o=new DocumentFragment,i=document.createElement("div"),u=document.getElementById(e.id||"app");(null==u?void 0:u.hasAttribute("data-skip"))||(o.appendChild(i),_(o.querySelector("div"),r()),null==u||null===(t=u.parentNode)||void 0===t||t.replaceChild(i,u))},e.attrIDom=v,e.attributesIDom=p,e.component=function(e){function t(t,n){return function(e){var t,n=e.hooks,r=e.newProps,o=e.key,i=e.onCreate,u=e.onDelete,a=e.render,c=function(){},f=new Set,l=c,s=c,d={},p=function(e){var r=0,c=a({created:function(e){return l=e||l},deleted:function(e){return s=e||s},execute:function(e,t){return function(e){return function(t,r){var o=!r,i=n.get(e),u=!i||!r.every((function(e,t){return JSON.stringify(e)===JSON.stringify(i[t])}));(o||u)&&J((function(){n.set(e,r),f.add(e),t()}))}}("execute-"+o+"-"+r++)(e,t)},key:o,props:d=e||{},update:function(e){return function(e){return function(r){var o=e;return n.has(e)||(n.set(e,r),f.add(e)),[n.get(e),function(e){J((function(){n.set(o,e),_(t,p(d))}))}]}}("update-"+o+"-"+r++)(e)}});return null===c?function(){return null}:function(){return t=c({key:o,elementAttached:function(){var e=t;e.__hooks=f,e.__deleted=s,d.view&&(e.dataset.view=d.view),l(t),i(o,t)},elementDetached:function(){u(o,t)}})}};return p(r)}({hooks:z,key:n&&n.key?n.key+t:t,newProps:n||{},onCreate:H,onDelete:G,render:e})}return function(){return t.bind(null,"__"+R+++"__")}},e.elementCloseIDom=m,e.elementOpenEndIDom=h,e.elementOpenStartIDom=g,e.h=function(e,t,n){var r=t||{},o=arguments,i=Object.keys(r),u=i.length;function a(t){var a;void 0===t&&(t={skip:!1});var c=r.elementAttached||t.elementAttached,f=r.elementDetached||t.elementDetached,l=r.skip||t.skip||null;return g(e,r.key||t.key||null),M({attributes:r,names:i,length:u}),h(),l?(b(),a=m(e)):(Array.isArray(n)?n.forEach(P):x(o,P),(a=m(e)||{})._elementAttached=c,a._elementDetached=f,"undefined"!=typeof window&&C({attributes:r,names:i,length:u,element:a}),"function"==typeof r.ref&&r.ref(a)),a}return a},e.notificationsIDom=y,e.patch=_,e.redirect=function(e){var t=N.document.createElement("a");t.setAttribute("href",e),L(t)},e.renderToStringIDom=w,e.router=Z,e.skipIDom=b,e.skipNodeIDom=D,e.textIDom=k,e.to=function(e){var t=e.target;e.preventDefault(),L(t)},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=h-h.umd.production.min.js.map
