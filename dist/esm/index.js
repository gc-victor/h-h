var I=(r,a)=>{r.parentNode.replaceChild(a,r)};function j(r){return r.currentTarget.__handler__[r.type](r)}function q(r,a,m,c){let N=document.activeElement,d=document.body,y=r.length,p=a.length,t=y,i=0,s=0,l=[],f=[];for(;i<p||s<t;)if(p===i)for(;s<t;){let e=r[s],n=e.parentNode,o=c.indexOf(n);o!==-1&&(m[o].insertBefore(e,a[i]),l.push(e)),s++}else if(t===s)for(;i<p;){let e=a[i],n=e.parentNode,o=m.includes(e);n&&!o&&(n.removeChild(e),f.push(e)),i++}else if(a[i].isEqualNode(r[s]))i++,s++;else if(a[p-1].isEqualNode(r[t-1]))p--,t--;else{let e=a[i],n=r[s],o=e.parentNode,h=n.parentNode,u=l.includes(h),_=f.includes(o),g=m.includes(e),w=c.includes(n),S=e.tagName===n.tagName,M=Boolean(o&&o.parentNode);if(!u||!_||g&&w)if(!g&&!w&&S&&M&&!l.includes(h.parentNode))!c.includes(h)&&!m.includes(o)&&!d.contains(h)?(o.parentNode.replaceChild(h,o),l.push(h),l.push(n),f.push(o),f.push(e)):d.contains(n)||(o.replaceChild(n,e),l.push(n),f.push(e)),i++,s++;else if(g&&w&&S){let $=e.attributes,T=n.attributes,F=$.length,J=T.length,R=Object.keys(T);for(let v=F-1;v>=0;v--){let b=$[v].name;!R.includes(b)&&b!=="type"&&e.removeAttribute(b)}for(let v=0;v<J;v++){let b=T[v].name,x=T[v].value;e.setAttribute(b,x)}if(!e.__handler__&&n.__handler__){let v=Object.keys(n.__handler__||{}),b=v.length;for(let x=0;x<b;x++)n.removeEventListener(v[x],j),e.addEventListener(v[x],j)}e===N&&!n.children.length&&n.childNodes.length&&n.childNodes[0].nodeType===3&&(e.textContent=n.textContent),e.__handler__=n.__handler__,l.push(n),f.push(e),i++,s++}else!g&&w?s++:g&&!w?i++:(i++,s++);else u&&!_?s++:!u&&_?i++:g&&!w&&d.contains(n)?s++:g&&!w&&!d.contains(n)?(o.insertBefore(n,e),l.push(n),s++):!g&&w?(o.removeChild(e),f.push(e),i++):!w&&!g&&M?(o.replaceChild(n,e),l.push(n),f.push(e),i++,s++):(i++,s++)}}function O(r,a){let m=r.parentNode,c=document.activeElement;if(c&&c.tagName!=="BODY"&&r.contains(c)){let{p:N,n:d,pAncestry:y,nActiveElement:p,nAncestry:t}=U(r,a,c);if(!p)m.replaceChild(a,r);else return q(d,N,y,t),r}else m.replaceChild(a,r);return a}function U(r,a,m){let c=t(r),N=t(a),d=i(c[0],m),y=N.find(s=>{let l=m.__key__,f=s.__key__,e=m.getAttribute("name"),n=s.getAttribute("name");return l&&f&&l===f||e&&n&&e===n||!l&&m.isEqualNode(s)}),p=y&&i(N[0],y);return{p:c,n:N,pAncestry:d,nActiveElement:y,nAncestry:p};function t(s){let l=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT),f=[],e=l.currentNode;for(;e;)f.push(e),e=l.nextNode();return f}function i(s,l){let f=[];for(;l&&l!==s;){let e=l;f.push(e),l=e.parentNode}return f.push(s),f}}var K=typeof global!="undefined"&&{}.toString.call(global)==="[object global]";K||(window.process={env:{TEST:!1}});var C=process.env.TEST?!1:K;var B,W=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window!="undefined"?window:global):r=>(B||(B=Promise.resolve())).then(r).catch(a=>setTimeout(()=>{throw a},0));var Z={value:1},L=new Set,A=new Map,E=new Map,k=new Map,P=new Map,H=new Map;function re(r){return()=>a.bind(null,`__${Z.value++}__`);function a(m,c={}){let N=()=>{},d=c&&c.key?c.key+m:m,y=new Set,p,t=N;function i(e,n){let o=h=>{k.set(e,h);let u=l();!C&&p&&(u=O(p,u)),p=u};return k.has(e)||k.set(e,n),[()=>k.get(e),o]}function s(e,n,o){let h=!o,u=k.get(e),_=u?!o.every((g,w)=>JSON.stringify(g)===JSON.stringify(u[w])):!0;(h||_)&&(k.set(e,o),n(o))}return p=l();function l(){let e=0,n={},o=r({cleanup:u=>t=u||t,execute:(u,_)=>{let g=`execute${d}${e++}`;return y.add(g),s(g,u,_)},key:d,props:c,ref:u=>n.fn=u,update:u=>{let _=`update${d}${e++}`;return y.add(_),i(_,u)}}),h=E.get(d);return n.fn&&n.fn(o,h),!C&&o?(o.__key__=o.__key__||d,E.forEach(function(u,_){let g=A.get(_)||[];u&&!(E.get(_)&&!E.get(_).parentNode)&&o.contains(u)&&!g.includes(d)&&_!==d&&(A.set(d,[...g,_]),L.add(_))}),E.set(d,o),P.set(d,y),H.set(d,t)):E.get(d)&&!o&&W(()=>t&&f()),o}function f(){let e=[...A.get(d)||[d]],n=e.length;for(let o=0;o<n;o++)if(E.get(m)){let h=e[o];H.get(h)(E.get(h)),E.set(h,1),L.has(h)||(P.get(h).forEach(u=>k.delete(u)),P.delete(h),E.delete(h)),L.delete(h),A.delete(h)}t=null,p=null}}}var z=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;function ae(r,a={},m=[]){let c=r==="svg"&&!C?document.createElementNS("http://www.w3.org/2000/svg","svg"):document.createElement(r),N=Object.keys(a||{}),d=N.length,y=m.length;for(let p=0;p<y;p++){let t=m[p];t&&r==="svg"?c.innerHTML=`${c.innerHTML}${t.outerHTML}`:t&&c.appendChild(typeof t=="string"?document.createTextNode(t):t)}for(let p=0;p<d;p++){let t=N[p];if(!C&&t&&/^on/.test(t)){let i=t.toLowerCase().substring(2);c.__handler__=c.__handler__||{},c.__handler__[i]=a[t],c.addEventListener(i,j)}if(t&&!/^key$/.test(t)&&!/^on/.test(t)&&!/^ref$/.test(t)){let i=t==="className"?"class":"",s=t==="htmlFor"?"for":"",l=z.test(t)&&t.replace(/[A-Z0-9]/,"-$&").toLowerCase();(t!=="checked"||t==="checked"&&a[t])&&c.setAttribute(s||i||l||t,a[t])}t&&/^key$/.test(t)&&(c.__key__=a[t])}return c}export{Z as __keyCounter,I as app,re as component,ae as h};
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
