{"version":3,"file":"h-h.umd.production.min.js","sources":["../src/quicktask.ts","../src/dom/dom.incremental-dom.ts","../src/dom/dom.hyperscript.ts","../src/router/router.ts","../src/router/router.root.ts","../src/app/app.constants.ts","../src/component/component.factory.ts","../src/component/component.ts","../src/app/app.ts"],"sourcesContent":["// https://github.com/staltz/quicktask/blob/master/index.ts\n// https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/queueMicrotask#When_queueMicrotask_isnt_available\n// https://morioh.com/p/4ca3c63dbc0c\nconst getGlobal = () => {\n    if (typeof globalThis !== 'undefined') return globalThis;\n    // eslint-disable-next-line\n    if (typeof self !== 'undefined') return self;\n    if (typeof window !== 'undefined') return window;\n    if (typeof global !== 'undefined') return global;\n    throw new Error('Unable to locate global object');\n};\n\nconst globalThis: any = getGlobal();\n\nif (typeof globalThis.queueMicrotask !== 'function') {\n    globalThis.queueMicrotask = function queueMicrotask(callback: any) {\n        if (globalThis.Promise) {\n            Promise.resolve()\n                .then(callback)\n                .catch((e) =>\n                    setTimeout(() => {\n                        throw e;\n                    })\n                );\n        } else if (typeof process !== 'undefined') {\n            return process.nextTick(callback);\n        } else {\n            return setTimeout(callback);\n        }\n    };\n}\n\nexport function quicktask() {\n    return (fn: (arg?: any) => void) => globalThis.queueMicrotask(fn);\n}\n","import { HyperScriptNode } from './dom.types';\nimport { quicktask } from '../quicktask';\n\nconst schedule = quicktask();\nconst noop = (_?: unknown) => {};\nconst {\n    attr,\n    attributes = {},\n    elementClose,\n    elementOpenEnd,\n    elementOpenStart,\n    notifications = {\n        nodesCreated: noop,\n        nodesDeleted: noop,\n    },\n    patchOuter,\n    renderToString = noop,\n    skip = noop,\n    skipNode = noop,\n    text,\n    // @ts-ignore\n} = IncrementalDOM;\n\n// @see https://github.com/davidjamesstone/superviews.js/issues/32#issuecomment-274372713\nexport const attributesIDom = attributes || {};\nexport const attrIDom = attr;\nexport const elementCloseIDom = elementClose;\nexport const elementOpenEndIDom = elementOpenEnd;\nexport const elementOpenStartIDom = elementOpenStart;\nexport const notificationsIDom = notifications;\nexport const renderToStringIDom = renderToString;\nexport const textIDom = text;\nexport const skipIDom = skip;\nexport const skipNodeIDom = skipNode;\nexport const patch = (node: Element, fn: (data: unknown) => void) => {\n    return schedule(() => {\n        return patchOuter(node, fn);\n    });\n};\n\nattributesIDom.value = (el: HTMLFormElement, _name: string, value: any) => {\n    return (el.value = value === null || typeof value === 'undefined' ? '' : value);\n};\n\nattributesIDom.checked = (el: HTMLFormElement, _name: string, value: any) => {\n    return (el.checked = !!value);\n};\n\nnotificationsIDom.nodesDeleted = (nodes: HyperScriptNode[]) =>\n    nodes.forEach(\n        (node) => node && node._elementDetached && schedule(node._elementDetached as () => void)\n    );\n\nnotificationsIDom.nodesCreated = (nodes: HyperScriptNode[]) =>\n    nodes.forEach(\n        (node) => node && node._elementAttached && schedule(node._elementAttached as () => void)\n    );\n","import {\n    attrIDom,\n    elementCloseIDom,\n    elementOpenEndIDom,\n    elementOpenStartIDom,\n    skipIDom,\n    textIDom,\n} from './dom.incremental-dom';\nimport { HTMLElements, HTMLElementsAttributes, HyperScriptNode } from './dom.types';\n\n// @see: https://github.com/preactjs/preact/blob/87202bd7dbcb5b94506f9388516a9c4bd289129a/compat/src/render.js#L10\nconst CAMEL_PROPS = /^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;\n\nexport function h<T extends HTMLElements>(\n    tagName: T,\n    attributes: HTMLElementsAttributes[T],\n    children: any[]\n) {\n    const attrs = attributes || {};\n    const outerArgs = arguments;\n    const names = Object.keys(attrs);\n    const length = names.length;\n\n    function render(\n        options: {\n            skip: boolean;\n            key?: string;\n            elementAttached?: Function;\n            elementDetached?: Function;\n        } = { skip: false }\n    ) {\n        let element;\n\n        const elementAttached = attrs.elementAttached || options.elementAttached;\n        const elementDetached = attrs.elementDetached || options.elementDetached;\n        const key = attrs.key || options.key || null;\n        const skip = attrs.skip || options.skip || null;\n\n        elementOpenStartIDom(tagName, key);\n        setAttributes({ attributes: attrs, names, length });\n        elementOpenEndIDom();\n\n        if (skip) {\n            skipIDom();\n\n            element = elementCloseIDom(tagName);\n        } else {\n            if (Array.isArray(children)) {\n                children.forEach(renderChildren);\n            } else {\n                forEachChildInArgs(outerArgs, renderChildren);\n            }\n\n            element = elementCloseIDom(tagName) || {};\n\n            element._elementAttached = elementAttached;\n            element._elementDetached = elementDetached;\n\n            if (typeof window !== 'undefined') {\n                setEvents({ attributes: attrs, names, length, element });\n            }\n\n            if (typeof attrs.ref === 'function') {\n                attrs.ref(element);\n            }\n        }\n\n        return element;\n    }\n\n    return render;\n}\n\nfunction isEvent(name: string): boolean {\n    return /^on/.test(name);\n}\n\nfunction isSkip(name: string): boolean {\n    return /^skip$/.test(name);\n}\n\nfunction isRef(name: string): boolean {\n    return /^ref$/.test(name);\n}\n\nfunction setAttributes({\n    attributes,\n    names,\n    length,\n}: {\n    attributes: any;\n    names: Array<string>;\n    length: number;\n}): void {\n    for (let i = 0; i < length; i++) {\n        const name = names[i];\n\n        if (name && !isEvent(name) && !isSkip(name) && !isRef(name)) {\n            const classProp = name === 'className' ? 'class' : '';\n            const forProp = name === 'htmlFor' ? 'for' : '';\n            // @see: https://github.com/preactjs/preact/blob/87202bd7dbcb5b94506f9388516a9c4bd289129a/compat/src/render.js#L149\n            const hyphenated =\n                CAMEL_PROPS.test(name) && name.replace(/[A-Z0-9]/, '-$&').toLowerCase();\n\n            attrIDom(forProp || classProp || hyphenated || name, attributes[name]);\n        }\n    }\n}\n\nfunction setEvents({\n    attributes,\n    names,\n    length,\n    element,\n}: {\n    attributes: any;\n    names: Array<string>;\n    length: number;\n    element: HyperScriptNode;\n}): void {\n    for (let i = 0; i < length; i++) {\n        const name = names[i];\n\n        if (name && isEvent(name)) {\n            const eventName = name.toLowerCase().substring(2);\n\n            element._listeners = element._listeners || {};\n\n            if (!element._listeners[eventName]) {\n                element.addEventListener(eventName, eventProxy, false);\n            }\n\n            element._listeners[eventName] = attributes[name];\n        }\n    }\n}\n\nfunction eventProxy(event: Event) {\n    return (event.currentTarget as HyperScriptNode)._listeners[event.type](event);\n}\n\nfunction forEachChildInArgs(args: IArguments, iteratee: Function) {\n    if (args.length > 2) {\n        for (let i = 2; i < args.length; i++) {\n            iteratee(args[i]);\n        }\n    }\n}\n\nfunction renderChildren(children: Function | string | void) {\n    const str = typeof children === 'string' ? textIDom(children) : '';\n\n    return typeof children === 'function' ? children() : str;\n}\n","import { APP_ID } from '../app/app.constants';\nimport { View } from '../app/app.types';\nimport { patch } from '../dom';\nimport { root } from './router.root';\nimport { Params, RouterOptions } from './router.types';\n\ninterface Model {\n    [key: string]: any;\n}\n\ninterface Match {\n    params: Params;\n    title: (params: Params) => string;\n    view: View;\n}\n\ninterface SetMatcher {\n    set: (options: RouterOptions, path: string) => Match;\n}\n\nlet setClick: (link: HTMLAnchorElement) => void;\n\nconst matcher = storeMatcher();\nconst getParams = ({ params }: Match) => params;\nconst getTitle = (match: Match): string => match.title(getParams(match));\n\nexport const redirect = (href: string) => {\n    const link = root.document.createElement('a');\n\n    link.setAttribute('href', href);\n    setClick(link);\n};\nexport const to = (event: Event) => {\n    const link = event.currentTarget as HTMLAnchorElement;\n\n    event.preventDefault();\n\n    setClick(link);\n};\n\nconst initClick = (options: RouterOptions) => (link: HTMLAnchorElement) => {\n    const handler = (event: Event) => {\n        link.removeEventListener('click', handler);\n        render({ options, event });\n    };\n\n    link.addEventListener('click', handler);\n    link.click();\n};\n\nexport function router(options: RouterOptions) {\n    const path = root.location.pathname;\n    const match = matcher.set(options, path);\n\n    setClick = initClick(options);\n\n    popState(options);\n    setTitle({ match, path, isPopState: false });\n\n    return {\n        view: match.view || options.view,\n    };\n}\n\nfunction popState(options: RouterOptions) {\n    root.addEventListener('popstate', (event: Event) => render({ options, event }));\n}\n\nfunction render({ options, event }: { options: RouterOptions; event: Event }): void {\n    const target = event.currentTarget as HTMLAnchorElement;\n    const path = target.pathname || root.location.pathname;\n    const match = matcher.set(options, path);\n\n    event.preventDefault();\n\n    setTitle({\n        match,\n        path,\n        isPopState: event.type === 'popstate',\n    });\n    patch(\n        document.getElementById(options.routerId || options.id || APP_ID) as Element,\n        match.view()\n    );\n}\n\nfunction setTitle({\n    match,\n    path,\n    isPopState,\n}: {\n    match: Match;\n    path: string;\n    isPopState: boolean;\n}): void {\n    const title = getTitle(match) || root.document.title;\n\n    if (!isPopState) {\n        root.history.pushState({}, title, path);\n    }\n\n    root.document.title = title;\n}\n\n// @see https://github.com/jesseditson/fs-router/blob/v0.2.0/index.js#L7\nfunction addMatch(url: string, path: string) {\n    let matched;\n\n    const paramPattern = /:([^/]+)/;\n    const paramNames = [] as Array<any>;\n\n    while ((matched = path.match(paramPattern))) {\n        path = path.replace(paramPattern, '([^?/]+)');\n\n        paramNames.push(matched[1] as never);\n    }\n\n    const pattern = new RegExp(`^${path}(\\\\?(.*)|$)`, 'i');\n    const match = url.match(pattern);\n\n    if (match) {\n        return paramNames.reduce((map: Model, param: string, index: number) => {\n            map[param] = match[index + 1];\n\n            return map;\n        }, {});\n    }\n}\n\nfunction storeMatcher(): SetMatcher {\n    const storeMatches = new Map();\n    const noop = () => {};\n\n    return {\n        set(options: RouterOptions, url: string): Match {\n            if (!storeMatches.has(url)) {\n                let rout = '';\n                let params;\n\n                const optionsRouter = options.router;\n                const routes = Object.keys(optionsRouter);\n                const length = routes.length;\n\n                for (let i = 0; i < length; i = i + 1) {\n                    rout = routes[i];\n                    params = addMatch(url, routes[i]);\n\n                    if (params) {\n                        break;\n                    }\n                }\n\n                const item = optionsRouter[rout];\n\n                storeMatches.set(url, {\n                    params,\n                    title: item.title || noop,\n                    view: item.view || noop,\n                });\n            }\n\n            return storeMatches.get(url);\n        },\n    };\n}\n","// @see: https://github.com/purposeindustries/window-or-global/\nexport const root: any =\n    // eslint-disable-next-line\n    (typeof self === 'object' && self.self === self && self) ||\n    // @ts-ignore\n    (typeof global === 'object' && global.global === global && global) ||\n    window;\n","export const APP_ID = 'app';\n","import { patch } from '../dom';\nimport { Props, Render, UpdateResponse } from './component.types';\nimport { quicktask } from '../quicktask';\n\ninterface ComponentFactory {\n    hooks: any;\n    key: string;\n    onCreate: (key: string, element: Element) => void;\n    onDelete: (key: string, element: Element) => void;\n    render: Render;\n    newProps: Props;\n}\n\nconst schedule = quicktask();\n\nexport function componentFactory({\n    hooks,\n    newProps,\n    key,\n    onCreate,\n    onDelete,\n    render,\n}: ComponentFactory) {\n    const noop = () => {};\n    const keys = new Set();\n\n    let element: Element;\n    let created: (element: Element) => void = noop;\n    let deleted: (element: Element) => void = noop;\n    let props: Props = {};\n\n    const update = (currentHook: string) => {\n        return <S>(initialState: S): UpdateResponse<S> => {\n            const setStateHookIndex = currentHook;\n            const setState = (newState: S) => {\n                schedule(() => {\n                    hooks.set(setStateHookIndex, newState);\n                    patch(element, renderElement(props));\n                });\n            };\n\n            if (!hooks.has(currentHook)) {\n                hooks.set(currentHook, initialState);\n                keys.add(currentHook);\n            }\n\n            return [hooks.get(currentHook), setState];\n        };\n    };\n\n    const execute = (currentHook: string) => {\n        return (callback: () => void, depArray: any[]) => {\n            const hasNoDeps = !depArray;\n            const deps = hooks.get(currentHook);\n            const hasChangedDeps = deps\n                ? !depArray.every((item, i) => {\n                      return JSON.stringify(item) === JSON.stringify(deps[i]);\n                  })\n                : true;\n\n            if (hasNoDeps || hasChangedDeps) {\n                schedule(() => {\n                    hooks.set(currentHook, depArray);\n                    keys.add(currentHook);\n                    callback();\n                });\n            }\n        };\n    };\n\n    const renderElement = (nextProps?: Props): (() => Element | null) => {\n        let currentHook = 0;\n\n        props = nextProps || {};\n\n        const reRender = render({\n            created: (callback: (element: Element) => void) => {\n                return (created = callback || created);\n            },\n            deleted: (callback: (element: Element) => void) => {\n                return (deleted = callback || deleted);\n            },\n            execute: (callback: () => void, deps: any[]) => {\n                return execute(`execute-${key}-${currentHook++}`)(callback, deps);\n            },\n            key,\n            props,\n            update: (initialState) => {\n                return update(`update-${key}-${currentHook++}`)(initialState);\n            },\n        });\n\n        if (reRender === null) {\n            return () => {\n                return null;\n            };\n        }\n\n        return function elementCallback() {\n            element = reRender({\n                key,\n                elementAttached: () => {\n                    const e = element as any;\n\n                    e.__hooks = keys;\n                    e.__deleted = deleted;\n\n                    if (props.view) {\n                        e.dataset.view = props.view;\n                    }\n\n                    created(element);\n                    onCreate(key, element);\n                },\n                elementDetached: () => {\n                    onDelete(key, element);\n                },\n            });\n\n            return element;\n        };\n    };\n\n    return renderElement(newProps);\n}\n","import { componentFactory } from './component.factory';\nimport { Props, Render } from './component.types';\n\nlet keyCounter = 1;\n\nconst keyGenerator = () => {\n    return `__${keyCounter++}__`;\n};\n\nconst contains = new Map();\nconst elements = new Map();\nconst hooks = new Map();\n\nconst onDelete = (key: string) => {\n    (contains.get(key) || []).forEach((k: string) => {\n        const containedElement = elements.get(k);\n\n        if (containedElement) {\n            containedElement.__deleted(containedElement);\n            containedElement.__hooks.forEach((h: string) => hooks.delete(h));\n        }\n\n        contains.delete(k);\n        elements.delete(k);\n    });\n};\n\nconst setChildren = (element: Element, key: string) => {\n    // Set children and itself\n    elements.forEach((_, k) => {\n        const domElement = elements.get(k);\n\n        if (domElement && domElement.contains(element)) {\n            contains.set(k, [...(contains.get(k) || []), key]);\n        }\n    });\n};\n\nconst onCreate = (key: string, element: Element) => {\n    elements.set(key, element);\n    setChildren(element, key);\n};\n\nexport function component(render: Render) {\n    function factory(key: string, newProps?: Props) {\n        const _key = newProps && newProps.key ? newProps.key + key : key;\n\n        return componentFactory({\n            hooks,\n            key: _key,\n            newProps: newProps || {},\n            onCreate,\n            onDelete,\n            render,\n        });\n    }\n\n    function init() {\n        return factory.bind(null, keyGenerator());\n    }\n\n    return init;\n}\n","import { patch } from '../dom';\nimport { RouterOptions, router } from '../router';\nimport { App } from './app.types';\nimport { APP_ID } from './app.constants';\n\nexport function app(options: App) {\n    const plugin = options.router && router(options as RouterOptions);\n    const view = (plugin && plugin.view) || options.view;\n    const fragment = new DocumentFragment();\n    const tempContainer = document.createElement('div');\n    const appContainer = document.getElementById(options.id || APP_ID);\n\n    if (appContainer?.hasAttribute('data-skip')) return;\n\n    fragment.appendChild(tempContainer);\n    patch((fragment.querySelector('div') as unknown) as Element, view());\n    appContainer?.parentNode?.replaceChild(tempContainer, appContainer as Element);\n}\n"],"names":["globalThis","self","window","global","Error","getGlobal","quicktask","fn","queueMicrotask","callback","Promise","process","nextTick","setTimeout","resolve","then","e","schedule","noop","_","IncrementalDOM","attributes","notifications","patchOuter","renderToString","skip","skipNode","attributesIDom","attrIDom","attr","elementCloseIDom","elementClose","elementOpenEndIDom","elementOpenEnd","elementOpenStartIDom","elementOpenStart","notificationsIDom","nodesCreated","nodesDeleted","renderToStringIDom","textIDom","text","skipIDom","skipNodeIDom","patch","node","value","el","_name","checked","nodes","forEach","_elementDetached","_elementAttached","CAMEL_PROPS","isEvent","name","test","isSkip","isRef","setAttributes","names","length","i","classProp","forProp","hyphenated","replace","toLowerCase","setEvents","element","eventName","substring","_listeners","addEventListener","eventProxy","event","currentTarget","type","forEachChildInArgs","args","iteratee","renderChildren","children","str","setClick","root","matcher","storeMatcher","router","options","path","location","pathname","match","set","link","handler","removeEventListener","render","click","initClick","popState","setTitle","isPopState","view","preventDefault","document","getElementById","routerId","id","title","params","history","pushState","addMatch","url","matched","paramPattern","paramNames","push","pattern","RegExp","reduce","map","param","index","storeMatches","Map","has","rout","optionsRouter","routes","Object","keys","item","get","keyCounter","contains","elements","hooks","onDelete","key","k","containedElement","__deleted","__hooks","h","onCreate","domElement","setChildren","plugin","fragment","DocumentFragment","tempContainer","createElement","appContainer","hasAttribute","appendChild","querySelector","parentNode","replaceChild","factory","newProps","Set","created","deleted","props","renderElement","nextProps","currentHook","reRender","execute","deps","depArray","hasNoDeps","hasChangedDeps","every","JSON","stringify","add","update","initialState","setStateHookIndex","newState","elementAttached","dataset","elementDetached","componentFactory","bind","tagName","attrs","outerArgs","arguments","Array","isArray","ref","href","setAttribute"],"mappings":"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"}